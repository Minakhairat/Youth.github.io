<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Ninety-Nine</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet" />
  <style>
    :root{
      --primary:#1b335f; --accent:#e5c558; --bg:#f9f9fb; --card:#fff; --text:#111; --muted:#6b7280;
      --ok:#16a34a; --warn:#ca8a04; --danger:#dc2626;
      --cover-h:220px;     /* Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„ÙƒÙØ± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ */
      --footer-h:46px;     /* Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„ÙÙˆØªØ± Ø§Ù„Ø«Ø§Ø¨Øª */
      --cover-border:#00000014;
      --cover-grad: linear-gradient(180deg, #00000055 0%, #00000022 50%, transparent 100%);
    }
    :root[data-theme="dark"]{
      --bg:#0f1115; --card:#161a22; --text:#e7e7ea; --muted:#9aa3b2;
      --cover-border:#ffffff14;
      --cover-grad: linear-gradient(180deg, #0b0f1acc 0%, #0b0f1a66 60%, transparent 100%);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:"Cairo", system-ui, sans-serif; background:var(--bg); color:var(--text);
      padding-bottom:var(--footer-h);
    }

    /* ===== Ø§Ù„ØºÙ„Ø§Ù (Cover) Ø¨Ø¯ÙˆÙ† Ù†Øµ ===== */
    .cover{
      position:relative; width:100%; height:var(--cover-h);
      overflow:hidden; border-bottom:1px solid var(--cover-border); background:#000;
    }
    .cover__img{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; object-position:center;
      filter:saturate(1.05) contrast(1.05);
    }
    .cover__overlay{ position:absolute; inset:0; background:var(--cover-grad); pointer-events:none; }

    /* ===== Ø§Ù„Ù‡ÙŠØ¯Ø±: Ø§Ù„Ø£ÙØ§ØªØ§Ø± ÙÙˆÙ‚ ÙˆØ§Ù„Ø¹Ù†ÙˆØ§Ù† ØªØ­ØªÙ‡ Ø³Ø·Ø± ÙˆØ§Ø­Ø¯ ===== */
    header{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:10px 16px; background:var(--card); border-bottom:1px solid #0002;
      position:sticky; top:0; z-index:10;
    }
    .brand{
      display:flex; flex-direction:column; align-items:center; gap:6px; text-align:center;
    }
    .logo{
      width:220px; height:80px; border-radius:16px;
      border:3px solid var(--accent); object-fit:cover; background:#fff;
      box-shadow:0 6px 16px #0003; animation:pop .6s ease;
    }
    .brand h1{
      margin:0; font-size:22px; font-weight:900; line-height:1;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      max-width:min(70vw,520px);  /* ÙŠØ®Ù„ÙŠÙ‡Ø§ Ø³Ø·Ø± ÙˆØ§Ø­Ø¯ Ù…Ù†Ø³Ù‚ */
    }

    .toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    /* Ù‚Ø§Ø¹Ø¯Ø© Ø¹Ø§Ù…Ø© Ù…ÙˆØ­Ù‘Ø¯Ø© Ù„Ù„Ø£Ø²Ø±Ø§Ø± */
    .btn,.btn-ghost,.btn-danger,.nav button{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      height:44px;padding:0 16px;line-height:1;font-weight:800;cursor:pointer;
      border-radius:9999px;border:1px solid transparent;
      transition:transform .12s ease, box-shadow .2s ease, filter .2s ease;
    }
    /* Ø£Ø³Ø§Ø³ÙŠ */
    .btn{
      background:linear-gradient(180deg,#324b8a,var(--primary));
      color:#fff; box-shadow:0 6px 16px #0003, inset 0 -2px 0 #0003;
    }
    .btn:hover{ transform:translateY(-1px); box-shadow:0 10px 24px #0004; }
    .btn:active{ transform:none; }
    /* Ø´ÙØ§Ù/Ø«Ø§Ù†ÙˆÙŠ */
    .btn-ghost{
      background:var(--card); border-color:#0002; color:var(--text);
      box-shadow:0 2px 8px #0001;
    }
    .btn-ghost:hover{ transform:translateY(-1px); }
    /* Ø®Ø·ÙŠØ± */
    .btn-danger{
      background:linear-gradient(180deg,#ef4444,#dc2626); color:#fff;
    }

    /* ===== Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± ===== */
    .nav{display:flex;gap:12px;justify-content:center;margin:12px;flex-wrap:wrap}
    .nav button{
      background:var(--card); color:var(--text); border:1px solid #0002;
      padding:0 14px; height:40px; box-shadow:0 2px 8px #0001;
      cursor:pointer; font-weight:800; border-radius:9999px;
      transition:transform .15s, box-shadow .2s;
    }
    .nav button:hover{ transform: translateY(-1px); box-shadow:0 8px 18px #0002 }
    .nav button.active{background:var(--primary);color:#fff;border-color:transparent}

    /* ===== Ø¨Ø·Ø§Ù‚Ø§Øª ÙˆØ¬Ø¯Ø§ÙˆÙ„ ===== */
    .container{padding:16px;max-width:1200px;margin:auto}
    .card{background:var(--card);border:1px solid #0002;border-radius:16px;overflow:hidden; animation: fadeUp .5s ease var(--i,0ms) both}
    .card-h{padding:14px 20px;font-weight:900;background:linear-gradient(90deg,var(--primary),#7a93d6); color:#fff}
    .card-h small{opacity:.85;font-weight:700}
    .card-h .right{float:inline-end}
    .card-h .right>*{vertical-align:middle}
    .card-h .right .btn-ghost{background:transparent;border-color:#ffffff55;color:#fff}
    .card-h .right .btn-ghost:hover{filter:brightness(1.05)}
    .card-h .title{
      font-size:18px; display:inline-flex; gap:8px; align-items:center;
      background:linear-gradient(90deg, #fff, #f5f7ff); -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    }
    .card-h::before{content:'';display:block;height:3px;background:linear-gradient(90deg,transparent,var(--accent),transparent)}
    .card-b{padding:16px}
    .input{padding:10px;border:1px solid #0002;border-radius:10px;background:var(--card);color:var(--text);height:44px}
    .hint{color:var(--muted);font-size:13px}

    .table-wrap{border:1px solid #0002;border-radius:12px;overflow:auto;max-height:60vh}
    table{width:100%;border-collapse:separate;border-spacing:0;min-width:920px;color:var(--text)}
    th,td{padding:12px;text-align:start;border-bottom:1px solid #0002}
    thead th{background:#f3f4f6;color:#111;position:sticky;top:0;z-index:1}
    [data-theme="dark"] thead th{background:#1f2635;color:#e7e7ea}
    tbody tr:nth-child(odd){background:#fafafa}
    [data-theme="dark"] tbody tr:nth-child(odd){background:#121a2a}
    tbody tr:hover{background:#f0f0f0}
    [data-theme="dark"] tbody tr:hover{background:#0f1726}
    img.avatar{width:44px;height:44px;border-radius:10px;object-fit:cover;border:2px solid var(--accent)}
    a.tel{color:inherit;text-decoration:underline dotted}

    .stats-bar{display:flex;gap:10px;flex-wrap:wrap;margin:8px 0}
    .stat{
      display:flex;align-items:center;gap:8px;background:var(--card);border:1px solid #0002;border-radius:12px;
      padding:10px 12px;font-weight:900;color:var(--text)
    }
    .stat i{font-style:normal;opacity:.75}

    .error{background:#fee2e2;color:#7f1d1d;border:1px solid #fecaca;padding:12px;border-radius:10px}

    /* ===== Ø§Ù„ØªÙˆØ³ØªØ§Øª ===== */
    .toast-area{position:fixed;bottom:calc(var(--footer-h) + 8px);left:50%;transform:translateX(-50%);display:flex;flex-direction:column;gap:8px;z-index:50}
    .toast{background:var(--card);color:var(--text);border:1px solid #0002;border-radius:12px;padding:10px 12px;box-shadow:0 6px 20px #0004;min-width:240px;transition:opacity .3s}
    .toast.ok{border-color:var(--ok)} .toast.warn{border-color:var(--warn)} .toast.err{border-color:var(--danger)}

    /* ===== ÙÙˆØªØ± Ø«Ø§Ø¨Øª ===== */
    footer.site-footer{
      position:fixed; inset-inline:0; bottom:0; height:var(--footer-h);
      display:flex; align-items:center; justify-content:center; gap:8px;
      padding:0 12px; background:var(--card); color:var(--muted);
      border-top:1px solid #0002; z-index:40; font-size:13px; text-align:center;
    }

    /* Animations */
    @keyframes fadeUp { from {opacity:0; transform:translateY(6px)} to {opacity:1; transform:none} }
    @keyframes pop { 0% {transform:scale(.92); opacity:0} 100% {transform:none; opacity:1} }
  </style>
</head>
<body>

  <!-- ===== Ø§Ù„ØºÙ„Ø§Ù ===== -->
  <section class="cover">
    <img class="cover__img" id="coverImg" alt="ØºÙ„Ø§Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹">
    <div class="cover__overlay"></div>
  </section>

  <!-- ===== Ø§Ù„Ù‡ÙŠØ¯Ø± (Ø£ÙØ§ØªØ§Ø± ÙÙˆÙ‚ ÙˆØ¹Ù†ÙˆØ§Ù† ØªØ­ØªÙ‡ Ø³Ø·Ø± ÙˆØ§Ø­Ø¯) ===== -->
  <header>
    <div class="brand">
      <img id="logoImg" class="logo" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ø®Ø¯Ù…Ø©">
      <h1>The Ninety-Nine</h1>
    </div>
    <div class="toolbar">
      <button id="themeBtn" class="btn-ghost">ğŸŒ™ Dark</button>
      <button id="logoutBtn" class="btn-danger">Ø®Ø±ÙˆØ¬</button>
    </div>
  </header>

  <!-- ===== Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± ===== -->
  <nav class="nav">
    <button class="active" data-tab="attendance">Ø­Ø¶ÙˆØ± âœ…</button>
    <button data-tab="data">Ø¨ÙŠØ§Ù†Ø§Øª ğŸ‘¥</button>
    <button data-tab="login">Ø¯Ø®ÙˆÙ„ ğŸ”</button>
    <button data-tab="stats">Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ğŸ“Š</button>
  </nav>

  <!-- ===== Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ===== -->
  <section class="container">
    <!-- ØªØ¨ÙˆÙŠØ¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div class="card" data-panel="login" style="display:none" style="--i:0ms">
      <div class="card-h"><span class="title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span></div>
      <div class="card-b">
        <div class="hint">Ø§ÙƒØªØ¨ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ù„ÙØªØ­ Ø¨Ø§Ù‚ÙŠ Ø§Ù„ØµÙØ­Ø§Øª.</div>
        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:8px">
          <input id="passInput" type="password" class="input" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
          <button id="loginBtn" class="btn">Ø¯Ø®ÙˆÙ„</button>
        </div>
      </div>
    </div>

    <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
    <div class="card" data-panel="data" style="--i:80ms">
      <div class="card-h">
        <span class="title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø®Ø¯ÙˆÙ…ÙŠÙ† ğŸ‘¥</span>
        <span class="right">
          <button id="exportAllBtn" class="btn-ghost">â¬‡ï¸ ØªØµØ¯ÙŠØ± CSV Ø§Ù„ÙƒÙ„</button>
        </span>
      </div>
      <div class="card-b">
        <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
          <label>Ø§Ù„Ø£Ø³Ø±Ø©:
            <select id="familyFilter">
              <option value="">Ø§Ù„ÙƒÙ„</option>
              <option>Family 1 Boys</option>
              <option>Family 2 Girls</option>
              <option>Family 3</option>
            </select>
          </label>
          <input id="searchInput" class="input" placeholder="Ø§Ø¨Ø­Ø«... Ø¨Ø§Ù„Ø§Ø³Ù…/Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„/Ø§Ù„Ø¹Ù†ÙˆØ§Ù†">
          <button id="refreshBtn" class="btn">ØªØ­Ø¯ÙŠØ« â†»</button>
        </div>

        <div id="dataError" class="error" style="display:none"></div>
        <div class="stats-bar" id="topStats"></div>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ø§Ø³Ù…</th>
                <th>Ø§Ù„Ø£Ø³Ø±Ø©</th>
                <th>Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„</th>
                <th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
                <th>Fun Fact</th>
                <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
              </tr>
            </thead>
            <tbody id="tbody"></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø­Ø¶ÙˆØ± -->
    <div class="card" data-panel="attendance" style="--i:160ms">
      <div class="card-h"><span class="title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± âœ…</span></div>
      <div class="card-b">
        <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
          <input id="nameInput" class="input" placeholder="Ø§Ù„Ø§Ø³Ù…">
          <input id="familyInput" class="input" placeholder="Ø§Ù„Ø£Ø³Ø±Ø©">
          <button id="addBtn" class="btn">Ø¥Ø¶Ø§ÙØ©</button>
          <button id="clearBtn" class="btn-ghost">ØªÙØ±ÙŠØº</button>
        </div>
        <div id="list"></div>
      </div>
    </div>

    <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
    <div class="card" data-panel="stats" style="display:none; --i:240ms">
      <div class="card-h"><span class="title">Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ğŸ“Š</span></div>
      <div class="card-b">
        <p class="hint">Ù‡Ù†Ø§ Ù…Ù„Ø®Øµ Ø³Ø±ÙŠØ¹â€¦</p>
        <div id="statsBox"></div>
      </div>
    </div>
  </section>

  <!-- ===== Ø§Ù„ÙÙˆØªØ± Ø§Ù„Ø«Ø§Ø¨Øª Ù„Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù†Ø´Ø± ===== -->
  <footer class="site-footer">
    Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ø®Ø¯Ù…Ø© Ø´Ø¨Ø§Ø¨ ÙƒÙ†ÙŠØ³Ø© Ø§Ù„Ø¹Ø°Ø±Ø§Ø¡ Ù…Ø±ÙŠÙ… Ùˆ Ø§Ù„Ø¨Ø§Ø¨Ø§ Ø£Ø«Ù†Ø§Ø³ÙŠÙˆØ³ Ø§Ù„Ø±Ø³ÙˆÙ„ÙŠ Ø¨Ù…Ø¯ÙŠÙ†Ø© Ù†ØµØ± Â©
  </footer>

  <script>
    // Ø«ÙŠÙ…
    const root = document.documentElement;
    const themeBtn = document.getElementById('themeBtn');
    const prefersDark = matchMedia('(prefers-color-scheme: dark)').matches;
    if (prefersDark) root.setAttribute('data-theme','dark');
    themeBtn.addEventListener('click', () => {
      const isDark = root.getAttribute('data-theme') === 'dark';
      root.setAttribute('data-theme', isDark ? 'light' : 'dark');
      themeBtn.textContent = isDark ? 'ğŸŒ™ Dark' : 'â˜€ï¸ Light';
    });

    // ØµÙˆØ± Ø§Ù„ÙƒÙØ± ÙˆØ§Ù„Ù„ÙˆØ¬Ùˆ (Ø¨Ø¯ÙˆÙ† Ø£ÙŠ Ù†Øµ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙØ±)
    document.getElementById('coverImg').src = 'cover.jpg'; // Ø¹Ø¯Ù‘Ù„ Ø§Ù„Ù…Ø³Ø§Ø± Ù„Ùˆ Ø­Ø§Ø¨Ø¨
    document.getElementById('logoImg').src  = 'logo.jpg';  // Ø¹Ø¯Ù‘Ù„ Ø§Ù„Ù…Ø³Ø§Ø± Ù„Ùˆ Ø­Ø§Ø¨Ø¨

    // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
    const nav = document.querySelector('.nav');
    const panels = [...document.querySelectorAll('[data-panel]')];
    nav.addEventListener('click', (e)=>{
      if(e.target.tagName!=='BUTTON') return;
      nav.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
      e.target.classList.add('active');
      const tab = e.target.dataset.tab;
      panels.forEach(p => p.style.display = (p.dataset.panel===tab?'':'none'));
    });

    // Ø£Ù…Ø«Ù„Ø© Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ø³ÙŠØ·Ø©
    const list = document.getElementById('list');
    document.getElementById('addBtn').onclick = ()=>{
      const name = (document.getElementById('nameInput').value||'').trim();
      const fam  = (document.getElementById('familyInput').value||'').trim();
      if(!name) return;
      const item = document.createElement('div');
      item.className = 'stat';
      item.innerHTML = `<b>${name}</b> <i>${fam||''}</i>`;
      list.prepend(item);
    };
    document.getElementById('clearBtn').onclick = ()=>{ list.innerHTML=''; };

    // Ø²Ø±Ø§Ø± ØªØ­Ø¯ÙŠØ« ÙˆÙ‡Ù…ÙŠ
    document.getElementById('refreshBtn').onclick = ()=>{
      const t = document.getElementById('topStats');
      t.innerHTML = '';
      [['Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†', 42], ['Ø­Ø¶ÙˆØ± Ø§Ù„ÙŠÙˆÙ…', 18], ['ØºÙŠØ§Ø¨', 24]].forEach(([k,v])=>{
        const s = document.createElement('div'); s.className='stat'; s.innerHTML = `<b>${v}</b><i>${k}</i>`;
        t.appendChild(s);
      });
    };
  </script>
</body>
</html>
